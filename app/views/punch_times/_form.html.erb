<%= form_for [@user, PunchTime.new], :html => {:class => "form-inline", role: "form"} do |f| %>
  <%= f.hidden_field :user_id %>
  <%= f.hidden_field :latitude, id: "latitude" %>
  <%= f.hidden_field :longitude, id: "longitude" %>
<% if belongs_to_org? %>
  <div class="form-group input-sm">
    <%= f.label "Organization Id", class: "sr-only" %>
    <%= collection_select(:organization, :organization_id, Organization.where(:id => @user.id), :id, :name, {:prompt => "Organization (optional)"}, {class: "form-control"})  %>
  </div>
<% end %>
<% if belongs_to_project? %>
  <div class="form-group input-sm">
    <%= f.label "Project Id", class: "sr-only" %>
    <%= collection_select(:project, :project_id, Project.where(:id => @user.id), :id, :name, {:prompt => 'Project (optional)'}, {:class => 'form-control'}) %>
  </div>
<% end %>

<%= form.select :organization, :organization_id, :include_blank => "Select Organization"%><br />
  <%= form.collection_select :make_id, Make.all, :id, :name, :include_blank => "Select Make" %><br />
  <%= form.collection_select(:model_id, Model.find_all_by_make_id(@models), :id, :name, options ={:prompt => "Select Model"}) %> 

<%= form.select :year, @years, :include_blank => "Select Year"%><br />
  <%= form.collection_select :make_id, Make.all, :id, :name, :include_blank => "Select Make" %><br />
  <%= form.collection_select(:model_id, Model.find_all_by_make_id(@models), :id, :name, options ={:prompt => "Select Model"}) %> 


<div class="form-group input-sm">
  <%= f.label "Description", class: "sr-only" %>
  <%= f.text_field :description, class: "form-control", placeholder: "Description" %>
</div>
<div class="form-group input-sm">
  <%= button_tag "Submit", :class => "btn btn-default", :type => "submit" %>
</div>
<% end %>
<div id="message">
</div>
<script>
  navigator.geolocation.getCurrentPosition(successHandler, errorHandler);
</script>
